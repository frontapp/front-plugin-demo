(this["webpackJsonpsample-plugin"]=this["webpackJsonpsample-plugin"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(26),s=n.n(i),o=n(19),l=n(7),u=n(10),d=n(6),b=n(3),j=n.n(b),f=n(5),p=n(35),v=function(){return Object(p.b)()},h=p.c,m=n(21),O=Object(m.c)({name:"frontContext",initialState:{frontContext:null},reducers:{setFrontContext:function(e,t){e.frontContext=t.payload}}}),x=O.actions.setFrontContext,y=function(e){return e.front.frontContext},C=O.reducer,w="airTableBaseId";function N(){return window.localStorage.getItem(w)||null}!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(a||(a={}));var k=function(){var e=Object(u.a)(j.a.mark((function e(t,n,a,c){var r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relayHttp({verb:a,url:"https://api.airtable.com/v0/".concat(N(),"/")+n,body:c,headers:{"Content-Type":"application/json"}});case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i||null===(r=i.body)||void 0===r?void 0:r.records);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),g=function(e,t){return k(e,"Companies".concat(null!==t&&void 0!==t&&t.length?"?"+t:""),a.GET)},S=function(e,t){return k(e,"Contacts".concat(null!==t&&void 0!==t&&t.length?"?"+t:""),a.GET)},T=function(e,t){return k(e,"Contacts",a.POST,{records:t})},E=function(){var e=Object(u.a)(j.a.mark((function e(t,n){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relayHttp({verb:a.GET,url:"https://api.airtable.com/v0/".concat(n,"/Contacts"),headers:{"Content-Type":"application/json"}});case 2:return c=e.sent,r=c.status,e.abrupt("return",200===r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=Object(m.b)("users/fetchUserAuthorized",function(){var e=Object(u.a)(j.a.mark((function e(t,n){var a,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.rejectWithValue,e.prev=1,c=N(),e.t0=c,!e.t0){e.next=8;break}return e.next=7,E(t,c);case 7:e.t0=e.sent;case 8:return r=e.t0,e.abrupt("return",Boolean(r));case 12:return e.prev=12,e.t1=e.catch(1),e.abrupt("return",a(e.t1.response.data));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(m.c)({name:"users",initialState:{authorized:null},reducers:{setAuthentication:function(e,t){var n=t.payload;!n&&window.localStorage.removeItem(w),e.authorized=n}},extraReducers:function(e){e.addCase(F.fulfilled,(function(e,t){var n=t.payload;e.authorized=n}))}}),R=P.actions.setAuthentication,I=function(e){return e.users.authorized},B=P.reducer,A=n(45),V=(n(71),n(1)),D=function(e){var t=e.title,n=e.value;return n?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"details-section-item-property-name",children:t}),Object(V.jsx)("div",{className:"details-section-item-property-value",children:n})]}):null},L=function(e){var t;return e?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"details-section-title",children:e["Full Name"]}),D({title:"Email",value:e.Email}),D({title:"Phone",value:e.Phone}),D({title:"Role",value:null===(t=e.Role)||void 0===t?void 0:t.join(", ")}),D({title:"Title",value:e.Title})]}):null},z=function(e){return e?Object(V.jsxs)(c.Fragment,{children:[Object(V.jsx)("div",{className:"details-section-title",children:e.Company}),D({title:"Website",value:e.Website}),D({title:"Address",value:e.Address}),D({title:"Industry",value:e.Industry}),D({title:"Employees",value:e.Employees}),D({title:"Contract Value",value:e["Contract Value"]}),D({title:"Segment",value:e.Segment}),D({title:"Contract Renewal Date",value:e.Renewal})]},e.Company):null},M=function(){var e=h(y),t=Object(c.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),s=Object(d.a)(i,2),l=s[0],b=s[1],p=Object(c.useState)([]),v=Object(d.a)(p,2),m=v[0],O=v[1],x=Object(c.useState)(),C=Object(d.a)(x,2),w=C[0],N=C[1],k=Object(c.useCallback)((function(e){var t=a.find((function(t){return t.id===e.key}));t&&N(t)}),[a]),T=Object(c.useCallback)(function(){var t=Object(u.a)(j.a.mark((function t(n){var a,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e,"filterByFormula=OR(".concat(n.map((function(e){return"{Full Name}='".concat(e,"'")})),")"));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return a=t.t0,t.next=8,g(e,"filterByFormula=OR(".concat(a.map((function(e){return"FIND('".concat(e.fields["Full Name"],"', ARRAYJOIN({Contacts}))")})),")"));case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1=[];case 11:c=t.t1,r(a),b(c);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(c.useEffect)((function(){if(!e||void 0===e.listMessages)return r([]),void b([]);e.listMessages().then((function(e){var t=e.results.flatMap((function(e){var t,n,a;return[].concat(Object(A.a)(e.to.map((function(e){return e.handle}))),[null===(t=e.from)||void 0===t?void 0:t.handle],Object(A.a)((null===(n=e.cc)||void 0===n?void 0:n.map((function(e){return e.handle})))||[]),Object(A.a)((null===(a=e.bcc)||void 0===a?void 0:a.map((function(e){return e.handle})))||[]))})).filter((function(e,t,n){return n.indexOf(e)===t}));return T(t)})).catch((function(){r([]),b([])}))}),[e,T]),Object(c.useEffect)((function(){var e=a.map((function(e){return{key:e.id,label:e.fields["Full Name"]}}));O(e),e.length?k(e[0]):N(null)}),[a,k]);var E=w?l.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.Contacts)||void 0===n?void 0:n.includes(null===w||void 0===w?void 0:w.id)})).map((function(e){return e.fields})):[];return Object(V.jsxs)("div",{className:"this-conversation-wrapper",children:[w&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"this-conversation-header",children:[Object(V.jsx)("div",{className:"this-conversation-dropdown",children:Object(V.jsx)(f.SearchableDropdown,{isRequired:!0,autoWidth:!0,onSelectValue:k,title:"Contact",placeholder:"Select contact",options:m,value:{key:null===w||void 0===w?void 0:w.id,label:null===w||void 0===w?void 0:w.fields["Full Name"]},icon:Object(V.jsx)(f.ChannelsIcon,{})})}),Object(V.jsx)(o.b,{to:"/create",className:"primary-header-link",children:Object(V.jsx)(f.Button,{variant:"tertiary",label:"+ Create contact"})})]}),Object(V.jsxs)("div",{className:"details-main-info",children:[L(w.fields),E.map((function(e){return z(e)}))]})]}),!w&&0===E.length&&Object(V.jsxs)("div",{className:"this-conversation-body-no-items-wrapper",children:[Object(V.jsx)("p",{className:"this-conversation-body-no-items-text",children:"No contacts found in Airtable for this conversation."}),Object(V.jsx)(o.b,{to:"/create",className:"this-conversation-body-no-items-link",children:Object(V.jsx)(f.Button,{variant:"tertiary",label:"Create contact"})})]})]})},H=(n(76),function(e){var t=e.contact,n=e.id,a=Object(l.g)();return Object(V.jsxs)(f.TaskCard,{variant:"no-icon",title:t["Full Name"],width:"100%",className:"contact-card",onClick:function(){return function(e){a.push("/items/".concat(e))}(n)},children:[t.Email?Object(V.jsx)("div",{className:"contact-card-body-line",children:Object(V.jsx)("span",{className:"item-card-body-line-text",children:t.Email})}):null,t.Phone?Object(V.jsx)("div",{className:"contact-card-body-line",children:Object(V.jsx)("span",{className:"item-card-body-line-text",children:t.Phone})}):null,t.Title?Object(V.jsx)("div",{className:"contact-card-body-line",children:Object(V.jsx)("span",{className:"item-card-body-line-text",children:t.Title})}):null]})}),q=(n(77),function(e){var t=e.contacts,n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],i=a[1],s=Object(c.useMemo)((function(){return t.filter((function(e){var t,n,a,c,i=e.fields;return(null===(t=i["Full Name"])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(r.toLowerCase()))||(null===(a=i.Email)||void 0===a||null===(c=a.toLowerCase())||void 0===c?void 0:c.includes(r.toLowerCase()))}))}),[t,r]);return Object(V.jsxs)("div",{className:"search-tab-wrapper",children:[Object(V.jsx)(f.SearchInput,{className:"search-tab-body-search-input",label:"Contact name or email",placeholder:"Search by contact name or email",onChange:function(e){i(e)},isClearIconNeeded:!1}),r&&Object(V.jsxs)("div",{className:"search-tab-body-search-value",children:["Results for \u201c",r,"\u201d"]}),s.length>0&&s.map((function(e){var t=e.fields,n=e.id;return Object(V.jsx)(H,{contact:t,id:n},n)})),0===s.length&&!!r&&Object(V.jsx)(f.NoResults,{className:"search-tab-body-no-results"})]})}),G=(n(78),[{label:"This conversation",key:"/primary"},{label:"Search",key:"/primary/search"}]),W=function(){var e=Object(l.g)(),t=Object(l.h)(),n=v(),a=h(y),r=Object(c.useState)(G[0].key),i=Object(d.a)(r,2),s=i[0],o=i[1],b=Object(c.useState)([]),p=Object(d.a)(b,2),m=p[0],O=p[1],x=Object(c.useState)([]),C=Object(d.a)(x,2),w=C[0],N=C[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(a);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,N(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(a);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,O(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a&&e(),a&&t()}),[a]),Object(c.useEffect)((function(){o(t.pathname)}),[]);return Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{className:"primary-header",children:[Object(V.jsx)("span",{className:"primary-header-text",children:"Contacts"}),Object(V.jsx)(f.Button,{variant:"tertiary",label:"Log out",onClick:function(){n(R(!1))}})]}),Object(V.jsx)(f.Tabs,{tabs:G,onClick:function(t){e.push(t),o(t)},isSelected:s}),Object(V.jsxs)(l.d,{children:[Object(V.jsx)(l.b,{exact:!0,path:"/primary",children:Object(V.jsx)(M,{})}),Object(V.jsx)(l.b,{path:"/primary/search",children:Object(V.jsx)(q,{companies:w,contacts:m})})]})]})},U=(n(79),function(){var e=Object(l.g)().goBack,t=Object(l.i)().id,n=h(y),a=Object(c.useState)(),r=Object(d.a)(a,2),i=r[0],s=r[1],o=Object(c.useState)(),b=Object(d.a)(o,2),p=b[0],v=b[1],m=Object(c.useState)([]),O=Object(d.a)(m,2),x=O[0],C=O[1],w=Object(c.useState)([]),N=Object(d.a)(w,2),k=N[0],T=N[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n);case 2:t=e.sent,T(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n);case 2:t=e.sent,C(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e(),n&&t()}),[n]),Object(c.useEffect)((function(){var e=null===x||void 0===x?void 0:x.find((function(e){return e.id===t})),n=null===k||void 0===k?void 0:k.find((function(t){var n,a;return null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(a=n.Company)||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t.id)}));s(e),v(n)}),[x,k,t]);return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"details-header",children:Object(V.jsx)(f.PageReturnHeader,{onReturnClick:function(){e()},label:"Contact details"})}),Object(V.jsxs)("div",{className:"details-main-info",children:[L(null===i||void 0===i?void 0:i.fields),z(null===p||void 0===p?void 0:p.fields)]})]})}),J=n(20),Z=n(44),Y=n(46),$=["Champion","Decision Maker","Procurement","Influencer"],_=(n(80),n(81),function(e){var t,n,a={};return null!==(t=e.name)&&void 0!==t&&t.length||(a.name="The Contact Name is required."),/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(e.email)||(a.email="Please enter a valid email."),null!==(n=e.email)&&void 0!==n&&n.length||(a.email="The Email is required."),a}),K={name:"",email:"",phone:"",company:null,role:null},Q=function(e){var t=e.companies,n=Object(Z.b)(),a=n.values,r=n.setFieldValue,i=Object(c.useMemo)((function(){return(t||[]).map((function(e){return{key:e.id,label:e.fields.Company}}))}),[t]);return Object(V.jsx)("div",{className:"contact-company-wrapper",children:Object(V.jsx)(f.SearchableDropdown,{onSelectValue:function(e){r("company",e)},title:"Company",placeholder:"Select company",options:i,value:a.company})})},X=function(){var e=Object(Z.b)(),t=e.values,n=e.setFieldValue,a=Object(c.useMemo)((function(){return $.map((function(e){return{key:e,label:e}}))}),[]);return Object(V.jsx)("div",{className:"contact-role-wrapper",children:Object(V.jsx)(f.SearchableDropdown,{onSelectValue:function(e){n("role",e)},title:"Role",placeholder:"Select role",options:a,value:t.role})})},ee=function(){var e=Object(l.g)().goBack,t=h(y),n=Object(c.useState)([]),a=Object(d.a)(n,2),r=a[0],i=a[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t&&e()}),[t]);var s=Object(c.useCallback)(function(){var n=Object(u.a)(j.a.mark((function n(a){var c,r,i,s,o;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[{fields:{"Full Name":a.name,Email:a.email,Phone:a.phone}}],null!==(c=a.company)&&void 0!==c&&c.key&&(i[0].fields.Company=[null===(s=a.company)||void 0===s?void 0:s.key]),null!==(r=a.role)&&void 0!==r&&r.key&&(i[0].fields.Role=[null===(o=a.role)||void 0===o?void 0:o.key]),n.next=5,T(t,i);case 5:Y.b.success("Contact created!",{position:Y.b.POSITION.TOP_RIGHT,autoClose:3e3,onClose:function(){e()}});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return Object(V.jsxs)("div",{className:"contact-creation-wrapper",children:[Object(V.jsx)(Z.a,{initialValues:K,validate:_,onSubmit:s,children:function(t){var n=t.values,a=t.handleSubmit,c=t.isValid,i=t.dirty,s=t.setFieldValue,o=t.setTouched,l=t.errors,u=t.touched;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"contact-creation-body",children:[Object(V.jsx)(f.PageReturnHeader,{label:"Create new",onReturnClick:e,className:"contact-creation-prh"}),Object(V.jsx)("h2",{className:"contact-creation-title",children:"Create new contact"}),Object(V.jsx)("div",{className:"contact-field-wrapper",children:Object(V.jsx)(f.TextField,{isRequired:!0,label:"Name",value:n.name,placeholder:"Contact name",onChange:function(e){return s("name",e)},onBlur:function(){return o(Object(J.a)(Object(J.a)({},u),{},{name:!0}),!0)},errorText:l.name&&u.name?l.name:""})}),Object(V.jsx)("div",{className:"contact-field-wrapper",children:Object(V.jsx)(f.TextField,{isRequired:!0,label:"Email",value:n.email,placeholder:"Contact email",onChange:function(e){return s("email",e)},onBlur:function(){return o(Object(J.a)(Object(J.a)({},u),{},{email:!0}),!0)},errorText:l.email&&u.email?l.email:""})}),Object(V.jsx)("div",{className:"contact-field-wrapper",children:Object(V.jsx)(f.TextField,{label:"Phone",value:n.phone,placeholder:"Contact phone",onChange:function(e){return s("phone",e)}})}),Object(V.jsx)(Q,{companies:r}),Object(V.jsx)(X,{})]}),Object(V.jsx)(f.Footer,{isPrimaryDisabled:!c||!i,primaryLabel:"Create",onPrimaryClick:a,secondaryLabel:"Cancel",onSecondaryClick:e})]})}}),Object(V.jsx)(Y.a,{})]})},te=(n(82),function(){var e=Object(l.g)(),t=v(),n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(""),o=Object(d.a)(s,2),b=o[0],p=o[1],m=Object(c.useState)(!1),O=Object(d.a)(m,2),x=O[0],C=O[1],N=h(y),k=h(I);Object(c.useEffect)((function(){k&&e.push("/primary")}),[k]);var g=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),e.t0=r,!e.t0){e.next=6;break}return e.next=5,E(N,r);case 5:e.t0=e.sent;case 6:e.t0?(t(R(!0)),n=r,window.localStorage.setItem(w,n),C(!1)):(C(!1),p("The base id isn't correct"));case 8:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();return Object(V.jsx)("div",{className:"sign-in-wrapper",children:Object(V.jsxs)("div",{className:"sign-in-content",children:[Object(V.jsx)(f.TextField,{label:"Airtable Base Id",placeholder:"Base Id",onChange:function(e){i(e),b.length&&p("")},value:r,isRequired:!0,errorText:b}),Object(V.jsx)("p",{className:"sign-in-description ",children:"Place enter your Airtable Base Id to continue work with the app."}),Object(V.jsx)(f.Button,{label:"Sign in",className:"sign-in-button",onClick:g,isDisabled:x})]})})}),ne=n(60),ae=["children"],ce=function(e){var t=e.children,n=Object(ne.a)(e,ae),a=h(I);return Object(V.jsx)(l.b,Object(J.a)(Object(J.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(V.jsx)(l.a,{to:{pathname:"/",state:{from:n}}})}}))},re=n(61);var ie=function(){var e=v(),t=h(y),n=h(I);return Object(c.useEffect)((function(){t&&e(F(t))}),[t,e]),Object(c.useEffect)((function(){var t=re.default.contextUpdates.subscribe((function(t){return e(x(t))}));return function(){return t.unsubscribe()}}),[e]),null!==n?Object(V.jsx)(o.a,{children:Object(V.jsxs)(l.d,{children:[Object(V.jsx)(ce,{path:"/create",children:Object(V.jsx)(ee,{})}),Object(V.jsx)(ce,{path:"/items/:id",children:Object(V.jsx)(U,{})}),Object(V.jsx)(ce,{path:"/primary",children:Object(V.jsx)(W,{})}),Object(V.jsx)(l.b,{exact:!0,path:"/",children:n?Object(V.jsx)(l.a,{to:"/primary"}):Object(V.jsx)(te,{})})]})}):null},se=(Object(m.b)("contacts/createContact",function(){var e=Object(u.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,n.dispatch,e.prev=1,e.abrupt("return",Promise.resolve([]));case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(m.c)({name:"contacts",initialState:{entities:[],contactsIds:{},contactsByWorkspaceId:{}},reducers:{},extraReducers:function(e){}}).reducer),oe=Object(m.a)({reducer:{contacts:se,front:C,users:B}});n(102);s.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(p.a,{store:oe,children:Object(V.jsx)(ie,{})})}),document.getElementById("root"))},71:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.ae9a62df.chunk.js.map
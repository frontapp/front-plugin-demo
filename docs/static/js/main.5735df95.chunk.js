(this["webpackJsonpsample-plugin"]=this["webpackJsonpsample-plugin"]||[]).push([[0],{105:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},111:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(24),o=n.n(i),l=n(31),s=n(10),u=n.n(s),d=n(19),j=n(11),b=n(25),m=n(4),p=n(5),v=n(36),f=function(){return Object(v.b)()},O=v.c,h=n(29),x=Object(h.c)({name:"frontContext",initialState:{frontContext:null},reducers:{setFrontContext:function(e,t){e.frontContext=t.payload}}}),y=x.actions.setFrontContext,C=function(e){return e.front.frontContext},N=x.reducer,S=(n(84),n(56)),E=n.n(S),k=n(55),R=n.n(k),T=n(69);function P(e){var t=Object({NODE_ENV:"production",PUBLIC_URL:"/front-plugin-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"keyKFNhsysDRk3NR4",REACT_APP_BASE_ID:"appJU5jmW6ndxJrWD"}).CONFIG_PATH;return t?(a||(a=JSON.parse(R.a.readFileSync(t,"utf-8"))),a[e]):Object({NODE_ENV:"production",PUBLIC_URL:"/front-plugin-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"keyKFNhsysDRk3NR4",REACT_APP_BASE_ID:"appJU5jmW6ndxJrWD"})[e]}Object(T.config)();var _="https://api.airtable.com/v0/".concat(P("REACT_APP_BASE_ID"),"/"),g=function(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(P("REACT_APP_API_KEY"))}},w=function(){var e=Object(d.a)(u.a.mark((function e(t,n,a){var c,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("get"!==n){e.next=6;break}return e.next=3,E.a.get(_+t,{params:a,headers:g()});case 3:i=e.sent,e.next=10;break;case 6:if("post"!==n){e.next=10;break}return e.next=9,E.a.post(_+t,a,{headers:g()});case 9:i=e.sent;case 10:return e.abrupt("return",null===(c=i)||void 0===c||null===(r=c.data)||void 0===r?void 0:r.records);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),F=function(e){return w("Companies","get",e)},A=function(e){return w("Contacts","get",e)},I=n(1),D=function(e){var t=e.title,n=e.value;return n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"details-section-item-property-name",children:t}),Object(I.jsx)("div",{className:"details-section-item-property-value",children:n})]}):null},B=function(e){var t;return e?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"details-section-title",children:e["Full Name"]}),D({title:"Email",value:e.Email}),D({title:"Phone",value:e.Phone}),D({title:"Role",value:null===(t=e.Role)||void 0===t?void 0:t.join(", ")}),D({title:"Title",value:e.Title})]}):null},W=function(e){return e?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"details-section-title",children:e.Company}),D({title:"Website",value:e.Website}),D({title:"Address",value:e.Address}),D({title:"Industry",value:e.Industry}),D({title:"Employees",value:e.Employees}),D({title:"Contract Value",value:e["Contract Value"]}),D({title:"Segment",value:e.Segment}),D({title:"Contract Renewal Date",value:e.Renewal})]}):null},V=function(){var e=O(C),t=Object(c.useState)([]),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),o=Object(j.a)(i,2),s=o[0],b=o[1],m=Object(c.useState)([]),v=Object(j.a)(m,2),f=v[0],h=v[1],x=Object(c.useState)(),y=Object(j.a)(x,2),N=y[0],S=y[1],E=function(e){var t=a.find((function(t){return t.id===e.key}));t&&S(t)},k=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["Leyton Graves","Pierre Smith"],e.next=3,A({filterByFormula:"OR(".concat(t.map((function(e){return"{Full Name}='".concat(e,"'")})),")")});case 3:return n=e.sent,e.next=6,F({filterByFormula:"OR(".concat(n.map((function(e){return"FIND('".concat(e.fields["Full Name"],"', ARRAYJOIN({Contacts}))")})),")")});case 6:a=e.sent,r(n),b(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){if(!e||void 0===e.listMessages)return r([]),void b([]);e.listMessages().then((function(e){var t=e.results.flatMap((function(e){var t,n,a;return[].concat(Object(l.a)(e.to.map((function(e){return e.handle}))),[null===(t=e.from)||void 0===t?void 0:t.handle],Object(l.a)((null===(n=e.cc)||void 0===n?void 0:n.map((function(e){return e.handle})))||[]),Object(l.a)((null===(a=e.bcc)||void 0===a?void 0:a.map((function(e){return e.handle})))||[]))})).filter((function(e,t,n){return n.indexOf(e)===t}));return k(t)})).catch((function(){r([]),b([])}))}),[e]),Object(c.useEffect)((function(){var e=a.map((function(e){return{key:e.id,label:e.fields["Full Name"]}}));h(e),e.length?E(e[0]):S(null)}),[a]);var R=N?s.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.Contacts)||void 0===n?void 0:n.includes(null===N||void 0===N?void 0:N.id)})).map((function(e){return e.fields})):[];return Object(I.jsxs)("div",{className:"this-conversation-wrapper",children:[Object(I.jsx)("div",{className:"this-conversation-header",children:Object(I.jsx)("div",{className:"this-conversation-dropdown",children:Object(I.jsx)(p.SearchableDropdown,{isRequired:!0,autoWidth:!0,onSelectValue:E,title:"Contact",placeholder:"Select contact",options:f,value:{key:null===N||void 0===N?void 0:N.id,label:null===N||void 0===N?void 0:N.fields["Full Name"]},icon:Object(I.jsx)(p.ChannelsIcon,{})})})}),N&&Object(I.jsxs)("div",{className:"details-main-info",children:[B(N.fields),R.map((function(e){return W(e)}))]})]})},K=(n(105),function(e){var t=e.contact,n=e.id,a=Object(m.g)();return Object(I.jsxs)(p.ItemCard,{title:t["Full Name"],width:"100%",className:"contact-card",onClick:function(){return function(e){a.push("/items/".concat(e))}(n)},children:[t.Email?Object(I.jsx)("div",{className:"contact-card-body-line",children:Object(I.jsx)("span",{className:"item-card-body-line-text",children:t.Email})}):null,t.Phone?Object(I.jsx)("div",{className:"contact-card-body-line",children:Object(I.jsx)("span",{className:"item-card-body-line-text",children:t.Phone})}):null,t.Title?Object(I.jsx)("div",{className:"contact-card-body-line",children:Object(I.jsx)("span",{className:"item-card-body-line-text",children:t.Title})}):null]})}),L=(n(107),function(e){var t=e.contacts,n=Object(c.useState)(""),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useMemo)((function(){return t.filter((function(e){var t,n,a,c,i=e.fields;return(null===(t=i["Full Name"])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(r.toLowerCase()))||(null===(a=i.Email)||void 0===a||null===(c=a.toLowerCase())||void 0===c?void 0:c.includes(r.toLowerCase()))}))}),[t,r]);return Object(I.jsxs)("div",{className:"search-tab-wrapper",children:[Object(I.jsx)(p.SearchInput,{className:"search-tab-body-search-input",label:"Contact name or email",placeholder:"Search by contact name or email",onChange:function(e){i(e)},isClearIconNeeded:!1}),r&&Object(I.jsxs)("div",{className:"search-tab-body-search-value",children:["Results for \u201c",r,"\u201d"]}),o.length>0&&o.map((function(e){var t=e.fields,n=e.id;return Object(I.jsx)(K,{contact:t,id:n},t["Full Name"])})),0===o.length&&!!r&&Object(I.jsx)(p.NoResults,{className:"search-tab-body-no-results"})]})}),H=(n(108),[{label:"This conversation",key:"/primary"},{label:"Search",key:"/primary/search"}]),J=function(e){var t=e.contacts,n=e.companies,a=Object(m.g)(),r=Object(m.h)(),i=Object(c.useState)(H[0].key),o=Object(j.a)(i,2),l=o[0],s=o[1];Object(c.useEffect)((function(){s(r.pathname)}),[]);return Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{className:"primary-header",children:[Object(I.jsx)("span",{className:"primary-header-text",children:"Items"}),Object(I.jsx)(b.b,{to:"/create",className:"primary-header-link",children:Object(I.jsx)(p.Button,{variant:"tertiary",label:"+ Create contact"})})]}),Object(I.jsx)(p.Tabs,{tabs:H,onClick:function(e){a.push(e),s(e)},isSelected:l}),Object(I.jsxs)(m.d,{children:[Object(I.jsx)(m.b,{exact:!0,path:"/primary",children:Object(I.jsx)(V,{})}),Object(I.jsx)(m.b,{path:"/primary/search",children:Object(I.jsx)(L,{companies:n,contacts:t})})]})]})},M=(n(109),function(e){var t=e.contacts,n=e.companies,a=Object(m.g)().goBack,r=Object(m.i)().id,i=Object(c.useState)(),o=Object(j.a)(i,2),l=o[0],s=o[1],u=Object(c.useState)(),d=Object(j.a)(u,2),b=d[0],v=d[1];Object(c.useEffect)((function(){var e=null===t||void 0===t?void 0:t.find((function(e){return e.id===r})),a=null===n||void 0===n?void 0:n.find((function(t){var n,a;return null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(a=n.Company)||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t.id)}));s(e),v(a)}),[t,n,r]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"details-header",children:Object(I.jsx)(p.PageReturnHeader,{onReturnClick:function(){a()},label:"Contact details"})}),Object(I.jsxs)("div",{className:"details-main-info",children:[B(null===l||void 0===l?void 0:l.fields),W(null===b||void 0===b?void 0:b.fields)]})]})}),U=n(39),q=n(49),z=n(50),Y=["Champion","Decision Maker","Procurement","Influencer"],G=(n(110),n(111),function(e){var t,n,a={};return(null===(t=e.name)||void 0===t?void 0:t.length)||(a.name="The Contact Name is required."),/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(e.email)||(a.email="Please enter a valid email."),(null===(n=e.email)||void 0===n?void 0:n.length)||(a.email="The Email is required."),a}),Z={name:"",email:"",phone:"",company:null,role:null},$=function(e){var t=e.companies,n=Object(q.b)(),a=n.values,r=n.setFieldValue,i=Object(c.useMemo)((function(){return t.map((function(e){return{key:e.id,label:e.fields.Company}}))}),[t]);return Object(I.jsx)("div",{className:"contact-company-wrapper",children:Object(I.jsx)(p.SearchableDropdown,{onSelectValue:function(e){r("company",e)},title:"Company",placeholder:"Select company",options:i,value:a.company})})},Q=function(){var e=Object(q.b)(),t=e.values,n=e.setFieldValue,a=Object(c.useMemo)((function(){return Y.map((function(e){return{key:e,label:e}}))}),[]);return Object(I.jsx)("div",{className:"contact-role-wrapper",children:Object(I.jsx)(p.SearchableDropdown,{onSelectValue:function(e){n("role",e)},title:"Role",placeholder:"Select role",options:a,value:t.role})})},X=function(e){var t=e.companies,n=e.onContactCreate,a=Object(m.g)().goBack,r=f(),i=Object(c.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c,r,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[{fields:{"Full Name":t.name,Email:t.email,Phone:t.phone}}],(null===(a=t.company)||void 0===a?void 0:a.key)&&(r[0].fields.Company=[null===(i=t.company)||void 0===i?void 0:i.key]),(null===(c=t.role)||void 0===c?void 0:c.key)&&(r[0].fields.Role=[null===(o=t.role)||void 0===o?void 0:o.key]),e.next=5,w("Contacts","post",{records:r});case 5:l=e.sent,n(l),z.b.success("Contact created!",{position:z.b.POSITION.TOP_RIGHT,autoClose:5e3});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[r,a]);return Object(I.jsxs)("div",{className:"contact-creation-wrapper",children:[Object(I.jsx)(q.a,{initialValues:Z,validate:G,onSubmit:i,children:function(e){var n=e.values,c=e.handleSubmit,r=e.isValid,i=e.dirty,o=e.setFieldValue,l=e.setTouched,s=e.errors,u=e.touched;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"contact-creation-body",children:[Object(I.jsx)(p.PageReturnHeader,{label:"Create new",onReturnClick:a,className:"contact-creation-prh"}),Object(I.jsx)("h2",{className:"contact-creation-title",children:"Create new contact"}),Object(I.jsx)("div",{className:"contact-field-wrapper",children:Object(I.jsx)(p.TextField,{isRequired:!0,label:"Name",value:n.name,placeholder:"Contact name",onChange:function(e){return o("name",e)},onBlur:function(){return l(Object(U.a)(Object(U.a)({},u),{},{name:!0}),!0)},errorText:s.name&&u.name?s.name:""})}),Object(I.jsx)("div",{className:"contact-field-wrapper",children:Object(I.jsx)(p.TextField,{isRequired:!0,label:"Email",value:n.email,placeholder:"Contact email",onChange:function(e){return o("email",e)},onBlur:function(){return l(Object(U.a)(Object(U.a)({},u),{},{email:!0}),!0)},errorText:s.email&&u.email?s.email:""})}),Object(I.jsx)("div",{className:"contact-field-wrapper",children:Object(I.jsx)(p.TextField,{label:"Phone",value:n.phone,placeholder:"Contact phone",onChange:function(e){return o("phone",e)}})}),Object(I.jsx)($,{companies:t}),Object(I.jsx)(Q,{})]}),Object(I.jsx)(p.Footer,{isPrimaryDisabled:!r||!i,primaryLabel:"Create",onPrimaryClick:c,secondaryLabel:"Cancel",onSecondaryClick:a})]})}}),Object(I.jsx)(z.a,{})]})},ee=n(73);var te=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),i=Object(j.a)(r,2),o=i[0],s=i[1],p=f();return Object(c.useEffect)((function(){var e=ee.default.contextUpdates.subscribe((function(e){return p(y(e))}));return function(){return e.unsubscribe()}}),[]),Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),Object(I.jsx)(b.a,{basename:"/front-plugin-demo",children:Object(I.jsxs)(m.d,{children:[Object(I.jsx)(m.b,{exact:!0,path:"/",render:function(){return Object(I.jsx)(m.a,{to:"/primary"})}}),Object(I.jsx)(m.b,{path:"/create",children:Object(I.jsx)(X,{companies:n,onContactCreate:function(e){s([].concat(Object(l.a)(e),Object(l.a)(o)))}})}),Object(I.jsx)(m.b,{path:"/items/:id",children:Object(I.jsx)(M,{companies:n,contacts:o})}),Object(I.jsx)(m.b,{path:"/primary",children:Object(I.jsx)(J,{companies:n,contacts:o})})]})})},ne=(Object(h.b)("contacts/createContact",function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,n.dispatch,e.prev=1,e.abrupt("return",Promise.resolve([]));case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(h.c)({name:"contacts",initialState:{entities:[],contactsIds:{},contactsByWorkspaceId:{}},reducers:{},extraReducers:function(e){}}).reducer),ae=Object(h.a)({reducer:{contacts:ne,front:N}});n(118);o.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(v.a,{store:ae,children:Object(I.jsx)(te,{})})}),document.getElementById("root"))},84:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.5735df95.chunk.js.map
(this["webpackJsonpsample-plugin"]=this["webpackJsonpsample-plugin"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(25),s=n.n(i),l=n(21),o=n(6),u=n(11),d=n(7),j=n(3),b=n.n(j),f=n(5),p=n(35),m=p.c,v=n(29),h=Object(v.c)({name:"frontContext",initialState:{frontContext:null},reducers:{setFrontContext:function(e,t){e.frontContext=t.payload}}}),O=h.actions.setFrontContext,x=function(e){return e.front.frontContext},y=h.reducer;!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(a||(a={}));var C=function(){return"https://api.airtable.com/v0/".concat(window.localStorage.getItem("airTableBaseId")||null,"/")},N=function(){var e=Object(u.a)(b.a.mark((function e(t,n,a,c){var r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relayHttp({verb:a,url:C()+n,body:c,headers:{"Content-Type":"application/json"}});case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i||null===(r=i.body)||void 0===r?void 0:r.records);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),w=function(e,t){return N(e,"Companies",a.GET,t)},S=function(e,t){return N(e,"Contacts",a.GET,t)},k=function(e,t){return N(e,"Contacts",a.POST,{records:t})},T=function(){var e=Object(u.a)(b.a.mark((function e(t,n){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relayHttp({verb:a.GET,url:"https://api.airtable.com/v0/".concat(n,"/Contacts"),headers:{"Content-Type":"application/json"}});case 2:return c=e.sent,r=c.status,e.abrupt("return",200===r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n(45),E=(n(70),n(1)),F=function(e){var t=e.title,n=e.value;return n?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"details-section-item-property-name",children:t}),Object(E.jsx)("div",{className:"details-section-item-property-value",children:n})]}):null},P=function(e){var t;return e?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"details-section-title",children:e["Full Name"]}),F({title:"Email",value:e.Email}),F({title:"Phone",value:e.Phone}),F({title:"Role",value:null===(t=e.Role)||void 0===t?void 0:t.join(", ")}),F({title:"Title",value:e.Title})]}):null},I=function(e){return e?Object(E.jsxs)(c.Fragment,{children:[Object(E.jsx)("div",{className:"details-section-title",children:e.Company}),F({title:"Website",value:e.Website}),F({title:"Address",value:e.Address}),F({title:"Industry",value:e.Industry}),F({title:"Employees",value:e.Employees}),F({title:"Contract Value",value:e["Contract Value"]}),F({title:"Segment",value:e.Segment}),F({title:"Contract Renewal Date",value:e.Renewal})]},e.Company):null},R=function(){var e=m(x),t=Object(c.useState)([]),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),s=Object(d.a)(i,2),l=s[0],o=s[1],j=Object(c.useState)([]),p=Object(d.a)(j,2),v=p[0],h=p[1],O=Object(c.useState)(),y=Object(d.a)(O,2),C=y[0],N=y[1],k=Object(c.useCallback)((function(e){var t=a.find((function(t){return t.id===e.key}));t&&N(t)}),[a]),T=Object(c.useCallback)(function(){var t=Object(u.a)(b.a.mark((function t(n){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=["Leyton Graves","Pierre Smith"],t.next=3,S(e,{filterByFormula:"OR(".concat(n.map((function(e){return"{Full Name}='".concat(e,"'")})),")")});case 3:return a=t.sent,t.next=6,w(e,{filterByFormula:"OR(".concat(a.map((function(e){return"FIND('".concat(e.fields["Full Name"],"', ARRAYJOIN({Contacts}))")})),")")});case 6:c=t.sent,r(a),o(c);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(c.useEffect)((function(){if(!e||void 0===e.listMessages)return r([]),void o([]);e.listMessages().then((function(e){var t=e.results.flatMap((function(e){var t,n,a;return[].concat(Object(g.a)(e.to.map((function(e){return e.handle}))),[null===(t=e.from)||void 0===t?void 0:t.handle],Object(g.a)((null===(n=e.cc)||void 0===n?void 0:n.map((function(e){return e.handle})))||[]),Object(g.a)((null===(a=e.bcc)||void 0===a?void 0:a.map((function(e){return e.handle})))||[]))})).filter((function(e,t,n){return n.indexOf(e)===t}));return T(t)})).catch((function(){r([]),o([])}))}),[e,T]),Object(c.useEffect)((function(){var e=a.map((function(e){return{key:e.id,label:e.fields["Full Name"]}}));h(e),e.length?k(e[0]):N(null)}),[a,k]);var F=C?l.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.Contacts)||void 0===n?void 0:n.includes(null===C||void 0===C?void 0:C.id)})).map((function(e){return e.fields})):[];return Object(E.jsxs)("div",{className:"this-conversation-wrapper",children:[Object(E.jsx)("div",{className:"this-conversation-header",children:Object(E.jsx)("div",{className:"this-conversation-dropdown",children:Object(E.jsx)(f.SearchableDropdown,{isRequired:!0,autoWidth:!0,onSelectValue:k,title:"Contact",placeholder:"Select contact",options:v,value:{key:null===C||void 0===C?void 0:C.id,label:null===C||void 0===C?void 0:C.fields["Full Name"]},icon:Object(E.jsx)(f.ChannelsIcon,{})})})}),C&&Object(E.jsxs)("div",{className:"details-main-info",children:[P(C.fields),F.map((function(e){return I(e)}))]})]})},B=(n(72),function(e){var t=e.contact,n=e.id,a=Object(o.f)();return Object(E.jsxs)(f.ItemCard,{title:t["Full Name"],width:"100%",className:"contact-card",onClick:function(){return function(e){a.push("/items/".concat(e))}(n)},children:[t.Email?Object(E.jsx)("div",{className:"contact-card-body-line",children:Object(E.jsx)("span",{className:"item-card-body-line-text",children:t.Email})}):null,t.Phone?Object(E.jsx)("div",{className:"contact-card-body-line",children:Object(E.jsx)("span",{className:"item-card-body-line-text",children:t.Phone})}):null,t.Title?Object(E.jsx)("div",{className:"contact-card-body-line",children:Object(E.jsx)("span",{className:"item-card-body-line-text",children:t.Title})}):null]})}),A=(n(76),function(e){var t=e.contacts,n=Object(c.useState)(""),a=Object(d.a)(n,2),r=a[0],i=a[1],s=Object(c.useMemo)((function(){return t.filter((function(e){var t,n,a,c,i=e.fields;return(null===(t=i["Full Name"])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(r.toLowerCase()))||(null===(a=i.Email)||void 0===a||null===(c=a.toLowerCase())||void 0===c?void 0:c.includes(r.toLowerCase()))}))}),[t,r]);return Object(E.jsxs)("div",{className:"search-tab-wrapper",children:[Object(E.jsx)(f.SearchInput,{className:"search-tab-body-search-input",label:"Contact name or email",placeholder:"Search by contact name or email",onChange:function(e){i(e)},isClearIconNeeded:!1}),r&&Object(E.jsxs)("div",{className:"search-tab-body-search-value",children:["Results for \u201c",r,"\u201d"]}),s.length>0&&s.map((function(e){var t=e.fields,n=e.id;return Object(E.jsx)(B,{contact:t,id:n},t["Full Name"])})),0===s.length&&!!r&&Object(E.jsx)(f.NoResults,{className:"search-tab-body-no-results"})]})}),V=(n(77),[{label:"This conversation",key:"/primary"},{label:"Search",key:"/primary/search"}]),D=function(){var e=Object(o.f)(),t=Object(o.g)(),n=m(x),a=Object(c.useState)(V[0].key),r=Object(d.a)(a,2),i=r[0],s=r[1],j=Object(c.useState)([]),p=Object(d.a)(j,2),v=p[0],h=p[1],O=Object(c.useState)([]),y=Object(d.a)(O,2),C=y[0],N=y[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(n);case 2:t=e.sent,N(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n);case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e(),n&&t()}),[n]),Object(c.useEffect)((function(){s(t.pathname)}),[]);return Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"primary-header",children:[Object(E.jsx)("span",{className:"primary-header-text",children:"Items"}),Object(E.jsx)(l.b,{to:"/create",className:"primary-header-link",children:Object(E.jsx)(f.Button,{variant:"tertiary",label:"+ Create contact"})})]}),Object(E.jsx)(f.Tabs,{tabs:V,onClick:function(t){e.push(t),s(t)},isSelected:i}),Object(E.jsxs)(o.c,{children:[Object(E.jsx)(o.a,{exact:!0,path:"/primary",children:Object(E.jsx)(R,{})}),Object(E.jsx)(o.a,{path:"/primary/search",children:Object(E.jsx)(A,{companies:C,contacts:v})})]})]})},L=(n(78),function(){var e=Object(o.f)().goBack,t=Object(o.h)().id,n=m(x),a=Object(c.useState)(),r=Object(d.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)(),j=Object(d.a)(l,2),p=j[0],v=j[1],h=Object(c.useState)([]),O=Object(d.a)(h,2),y=O[0],C=O[1],N=Object(c.useState)([]),k=Object(d.a)(N,2),T=k[0],g=k[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(n);case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n);case 2:t=e.sent,C(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e(),n&&t()}),[n]),Object(c.useEffect)((function(){var e=null===y||void 0===y?void 0:y.find((function(e){return e.id===t})),n=null===T||void 0===T?void 0:T.find((function(t){var n,a;return null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(a=n.Company)||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t.id)}));s(e),v(n)}),[y,T,t]);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"details-header",children:Object(E.jsx)(f.PageReturnHeader,{onReturnClick:function(){e()},label:"Contact details"})}),Object(E.jsxs)("div",{className:"details-main-info",children:[P(null===i||void 0===i?void 0:i.fields),I(null===p||void 0===p?void 0:p.fields)]})]})}),M=n(24),G=n(44),H=n(46),q=["Champion","Decision Maker","Procurement","Influencer"],W=(n(79),n(80),function(e){var t,n,a={};return null!==(t=e.name)&&void 0!==t&&t.length||(a.name="The Contact Name is required."),/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(e.email)||(a.email="Please enter a valid email."),null!==(n=e.email)&&void 0!==n&&n.length||(a.email="The Email is required."),a}),z={name:"",email:"",phone:"",company:null,role:null},J=function(e){var t=e.companies,n=Object(G.b)(),a=n.values,r=n.setFieldValue,i=Object(c.useMemo)((function(){return t.map((function(e){return{key:e.id,label:e.fields.Company}}))}),[t]);return Object(E.jsx)("div",{className:"contact-company-wrapper",children:Object(E.jsx)(f.SearchableDropdown,{onSelectValue:function(e){r("company",e)},title:"Company",placeholder:"Select company",options:i,value:a.company})})},U=function(){var e=Object(G.b)(),t=e.values,n=e.setFieldValue,a=Object(c.useMemo)((function(){return q.map((function(e){return{key:e,label:e}}))}),[]);return Object(E.jsx)("div",{className:"contact-role-wrapper",children:Object(E.jsx)(f.SearchableDropdown,{onSelectValue:function(e){n("role",e)},title:"Role",placeholder:"Select role",options:a,value:t.role})})},Z=function(){var e=Object(o.f)().goBack,t=m(x),n=Object(c.useState)([]),a=Object(d.a)(n,2),r=a[0],i=a[1];Object(c.useEffect)((function(){var e=function(){var e=Object(u.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t&&e()}),[t]);var s=Object(c.useCallback)(function(){var e=Object(u.a)(b.a.mark((function e(n){var a,c,r,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[{fields:{"Full Name":n.name,Email:n.email,Phone:n.phone}}],null!==(a=n.company)&&void 0!==a&&a.key&&(r[0].fields.Company=[null===(i=n.company)||void 0===i?void 0:i.key]),null!==(c=n.role)&&void 0!==c&&c.key&&(r[0].fields.Role=[null===(s=n.role)||void 0===s?void 0:s.key]),e.next=5,k(t,r);case 5:H.b.success("Contact created!",{position:H.b.POSITION.TOP_RIGHT,autoClose:5e3});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(E.jsxs)("div",{className:"contact-creation-wrapper",children:[Object(E.jsx)(G.a,{initialValues:z,validate:W,onSubmit:s,children:function(t){var n=t.values,a=t.handleSubmit,c=t.isValid,i=t.dirty,s=t.setFieldValue,l=t.setTouched,o=t.errors,u=t.touched;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:"contact-creation-body",children:[Object(E.jsx)(f.PageReturnHeader,{label:"Create new",onReturnClick:e,className:"contact-creation-prh"}),Object(E.jsx)("h2",{className:"contact-creation-title",children:"Create new contact"}),Object(E.jsx)("div",{className:"contact-field-wrapper",children:Object(E.jsx)(f.TextField,{isRequired:!0,label:"Name",value:n.name,placeholder:"Contact name",onChange:function(e){return s("name",e)},onBlur:function(){return l(Object(M.a)(Object(M.a)({},u),{},{name:!0}),!0)},errorText:o.name&&u.name?o.name:""})}),Object(E.jsx)("div",{className:"contact-field-wrapper",children:Object(E.jsx)(f.TextField,{isRequired:!0,label:"Email",value:n.email,placeholder:"Contact email",onChange:function(e){return s("email",e)},onBlur:function(){return l(Object(M.a)(Object(M.a)({},u),{},{email:!0}),!0)},errorText:o.email&&u.email?o.email:""})}),Object(E.jsx)("div",{className:"contact-field-wrapper",children:Object(E.jsx)(f.TextField,{label:"Phone",value:n.phone,placeholder:"Contact phone",onChange:function(e){return s("phone",e)}})}),Object(E.jsx)(J,{companies:r}),Object(E.jsx)(U,{})]}),Object(E.jsx)(f.Footer,{isPrimaryDisabled:!c||!i,primaryLabel:"Create",onPrimaryClick:a,secondaryLabel:"Cancel",onSecondaryClick:e})]})}}),Object(E.jsx)(H.a,{})]})},Y=(n(81),function(){var e=Object(o.f)(),t=Object(c.useState)(""),n=Object(d.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),s=Object(d.a)(i,2),l=s[0],j=s[1],p=m(x),v=function(){var t=Object(u.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(p,a);case 2:t.sent?(n=a,window.localStorage.setItem("airTableBaseId",n),e.push("/primary")):j("The base id isn't correct");case 4:case"end":return t.stop()}var n}),t)})));return function(){return t.apply(this,arguments)}}();return Object(E.jsx)("div",{className:"sign-in-wrapper",children:Object(E.jsxs)("div",{className:"sign-in-content",children:[Object(E.jsx)(f.TextField,{label:"Airtable Base Id",placeholder:"Base Id",onChange:function(e){r(e),l.length&&j("")},value:a,isRequired:!0,errorText:l}),Object(E.jsx)("p",{className:"sign-in-description ",children:"Place enter your Airtable Base Id to continue work with the app."}),Object(E.jsx)(f.Button,{label:"Sign in",className:"sign-in-button",onClick:v})]})})}),$=n(60);var _=function(){var e=Object(p.b)();return Object(c.useEffect)((function(){var t=$.default.contextUpdates.subscribe((function(t){return e(O(t))}));return function(){return t.unsubscribe()}}),[e]),Object(E.jsx)(l.a,{basename:"/front-plugin-demo",children:Object(E.jsxs)(o.c,{children:[Object(E.jsx)(o.a,{path:"/create",children:Object(E.jsx)(Z,{})}),Object(E.jsx)(o.a,{path:"/items/:id",children:Object(E.jsx)(L,{})}),Object(E.jsx)(o.a,{path:"/primary",children:Object(E.jsx)(D,{})}),Object(E.jsx)(o.a,{path:"/",children:Object(E.jsx)(Y,{})})]})})},K=(Object(v.b)("contacts/createContact",function(){var e=Object(u.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,n.dispatch,e.prev=1,e.abrupt("return",Promise.resolve([]));case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(v.c)({name:"contacts",initialState:{entities:[],contactsIds:{},contactsByWorkspaceId:{}},reducers:{},extraReducers:function(e){}}).reducer),Q=Object(v.a)({reducer:{contacts:K,front:y}});n(101);s.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(p.a,{store:Q,children:Object(E.jsx)(_,{})})}),document.getElementById("root"))},70:function(e,t,n){},72:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.d972ea56.chunk.js.map
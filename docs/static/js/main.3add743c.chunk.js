(this["webpackJsonpsample-plugin"]=this["webpackJsonpsample-plugin"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(26),s=n.n(i),o=n(19),l=n(7),u=n(37),d=n(10),b=n(6),j=n(3),f=n.n(j),p=n(5),v=n(35),h=function(){return Object(v.b)()},m=v.c,O=n(21),x=Object(O.c)({name:"frontContext",initialState:{frontContext:null},reducers:{setFrontContext:function(e,t){e.frontContext=t.payload}}}),y=x.actions.setFrontContext,C=function(e){return e.front.frontContext},w=x.reducer,N="airTableBaseId";function k(){return window.localStorage.getItem(N)||null}!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.DELETE="DELETE"}(a||(a={}));var g=function(){var e=Object(d.a)(f.a.mark((function e(t,n,a,c){var r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relayHttp({verb:a,url:"https://api.airtable.com/v0/".concat(k(),"/")+n,body:c,headers:{"Content-Type":"application/json"}});case 2:return i=e.sent,e.abrupt("return",null===i||void 0===i||null===(r=i.body)||void 0===r?void 0:r.records);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),S=function(e,t){return g(e,"Companies".concat(null!==t&&void 0!==t&&t.length?"?"+t:""),a.GET)},T=function(e,t){return g(e,"Contacts".concat(null!==t&&void 0!==t&&t.length?"?"+t:""),a.GET)},E=function(e,t){return g(e,"Contacts",a.POST,{records:t})},F=function(){var e=Object(d.a)(f.a.mark((function e(t,n){var c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relayHttp({verb:a.GET,url:"https://api.airtable.com/v0/".concat(n,"/Contacts"),headers:{"Content-Type":"application/json"}});case 2:return c=e.sent,r=c.status,e.abrupt("return",200===r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=Object(O.b)("users/fetchUserAuthorized",function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.rejectWithValue,e.prev=1,c=k(),e.t0=c,!e.t0){e.next=8;break}return e.next=7,F(t,c);case 7:e.t0=e.sent;case 8:return r=e.t0,e.abrupt("return",Boolean(r));case 12:return e.prev=12,e.t1=e.catch(1),e.abrupt("return",a(e.t1.response.data));case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),R=Object(O.c)({name:"users",initialState:{authorized:null},reducers:{setAuthentication:function(e,t){var n=t.payload;!n&&window.localStorage.removeItem(N),e.authorized=n}},extraReducers:function(e){e.addCase(P.fulfilled,(function(e,t){var n=t.payload;e.authorized=n}))}}),I=R.actions.setAuthentication,B=function(e){return e.users.authorized},A=R.reducer,V=n(46),D=(n(71),n(1)),L=function(e){var t=e.title,n=e.value;return n?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"details-section-item-property-name",children:t}),Object(D.jsx)("div",{className:"details-section-item-property-value",children:n})]}):null},z=function(e){var t;return e?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"details-section-title",children:e["Full Name"]}),L({title:"Email",value:e.Email}),L({title:"Phone",value:e.Phone}),L({title:"Role",value:null===(t=e.Role)||void 0===t?void 0:t.join(", ")}),L({title:"Title",value:e.Title})]}):null},M=function(e){return e?Object(D.jsxs)(c.Fragment,{children:[Object(D.jsx)("div",{className:"details-section-title",children:e.Company}),L({title:"Website",value:e.Website}),L({title:"Address",value:e.Address}),L({title:"Industry",value:e.Industry}),L({title:"Employees",value:e.Employees}),L({title:"Contract Value",value:e["Contract Value"]}),L({title:"Segment",value:e.Segment}),L({title:"Contract Renewal Date",value:e.Renewal})]},e.Company):null},H=function(){var e=m(C),t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),s=Object(b.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)([]),v=Object(b.a)(j,2),h=v[0],O=v[1],x=Object(c.useState)(),y=Object(b.a)(x,2),w=y[0],N=y[1],k=Object(c.useCallback)((function(e){var t=a.find((function(t){return t.id===e.key}));t&&N(t)}),[a]),g=Object(c.useCallback)(function(){var t=Object(d.a)(f.a.mark((function t(n){var a,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e,"filterByFormula=OR(".concat(n.map((function(e){return"{Full Name}='".concat(e,"'")})),")"));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:return a=t.t0,t.next=8,S(e,"filterByFormula=OR(".concat(a.map((function(e){return"FIND('".concat(e.fields["Full Name"],"', ARRAYJOIN({Contacts}))")})),")"));case 8:if(t.t1=t.sent,t.t1){t.next=11;break}t.t1=[];case 11:c=t.t1,r(a),u(c);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(c.useEffect)((function(){if(!e||void 0===e.listMessages)return r([]),void u([]);e.listMessages().then((function(e){var t=e.results.flatMap((function(e){var t,n,a;return[].concat(Object(V.a)(e.to.map((function(e){return e.handle}))),[null===(t=e.from)||void 0===t?void 0:t.handle],Object(V.a)((null===(n=e.cc)||void 0===n?void 0:n.map((function(e){return e.handle})))||[]),Object(V.a)((null===(a=e.bcc)||void 0===a?void 0:a.map((function(e){return e.handle})))||[]))})).filter((function(e,t,n){return n.indexOf(e)===t}));return g(t)})).catch((function(){r([]),u([])}))}),[e,g]),Object(c.useEffect)((function(){var e=a.map((function(e){return{key:e.id,label:e.fields["Full Name"]}}));O(e),e.length?k(e[0]):N(null)}),[a,k]);var E=w?l.filter((function(e){var t,n;return null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(n=t.Contacts)||void 0===n?void 0:n.includes(null===w||void 0===w?void 0:w.id)})).map((function(e){return e.fields})):[];return Object(D.jsxs)("div",{className:"this-conversation-wrapper",children:[w&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"this-conversation-header",children:[Object(D.jsx)("div",{className:"this-conversation-dropdown",children:Object(D.jsx)(p.SearchableDropdown,{isRequired:!0,autoWidth:!0,onSelectValue:k,title:"Contact",placeholder:"Select contact",options:h,value:{key:null===w||void 0===w?void 0:w.id,label:null===w||void 0===w?void 0:w.fields["Full Name"]},icon:Object(D.jsx)(p.ChannelsIcon,{})})}),Object(D.jsx)(o.b,{to:"/create",className:"primary-header-link",children:Object(D.jsx)(p.Button,{variant:"tertiary",label:"+ Create contact"})})]}),Object(D.jsxs)("div",{className:"details-main-info",children:[z(w.fields),E.map((function(e){return M(e)}))]})]}),!w&&0===E.length&&Object(D.jsxs)("div",{className:"this-conversation-body-no-items-wrapper",children:[Object(D.jsx)("p",{className:"this-conversation-body-no-items-text",children:"No contacts found in Airtable for this conversation."}),Object(D.jsx)(o.b,{to:"/create",className:"this-conversation-body-no-items-link",children:Object(D.jsx)(p.Button,{variant:"tertiary",label:"Create contact"})})]})]})},q=(n(76),function(e){var t=e.contact,n=e.id,a=Object(l.g)();return Object(D.jsxs)(p.TaskCard,{variant:"no-icon",title:t["Full Name"],width:"100%",className:"contact-card",onClick:function(){return function(e){a.push("/items/".concat(e))}(n)},children:[t.Email?Object(D.jsx)("div",{className:"contact-card-body-line",children:Object(D.jsx)("span",{className:"item-card-body-line-text",children:t.Email})}):null,t.Phone?Object(D.jsx)("div",{className:"contact-card-body-line",children:Object(D.jsx)("span",{className:"item-card-body-line-text",children:t.Phone})}):null,t.Title?Object(D.jsx)("div",{className:"contact-card-body-line",children:Object(D.jsx)("span",{className:"item-card-body-line-text",children:t.Title})}):null]})}),G=(n(77),function(e){var t=e.contacts,n=Object(c.useState)(""),a=Object(b.a)(n,2),r=a[0],i=a[1],s=Object(c.useMemo)((function(){return t.filter((function(e){var t,n,a,c,i=e.fields;return(null===(t=i["Full Name"])||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.includes(r.toLowerCase()))||(null===(a=i.Email)||void 0===a||null===(c=a.toLowerCase())||void 0===c?void 0:c.includes(r.toLowerCase()))}))}),[t,r]);return Object(D.jsxs)("div",{className:"search-tab-wrapper",children:[Object(D.jsx)(p.SearchInput,{className:"search-tab-body-search-input",label:"Contact name or email",placeholder:"Search by contact name or email",onChange:function(e){i(e)},isClearIconNeeded:!1}),r&&Object(D.jsxs)("div",{className:"search-tab-body-search-value",children:["Results for \u201c",r,"\u201d"]}),s.length>0&&s.map((function(e){var t=e.fields,n=e.id;return Object(D.jsx)(q,{contact:t,id:n},n)})),0===s.length&&!!r&&Object(D.jsx)(p.NoResults,{className:"search-tab-body-no-results"})]})}),W=(n(78),[{label:"This conversation",key:"/primary"},{label:"Search",key:"/primary/search"}]),U=function(){var e=Object(l.g)(),t=Object(l.h)(),n=h(),a=m(C),r=Object(c.useState)(W[0].key),i=Object(b.a)(r,2),s=i[0],o=i[1],u=Object(c.useState)([]),j=Object(b.a)(u,2),v=j[0],O=j[1],x=Object(c.useState)([]),y=Object(b.a)(x,2),w=y[0],N=y[1];Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(a);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,N(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(a);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:t=e.t0,O(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a&&e(),a&&t()}),[a]),Object(c.useEffect)((function(){o(t.pathname)}),[]);return Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{className:"primary-header",children:[Object(D.jsx)("span",{className:"primary-header-text",children:"Contacts"}),Object(D.jsx)(p.Button,{variant:"tertiary",label:"Log out",onClick:function(){n(I(!1))}})]}),Object(D.jsx)(p.Tabs,{tabs:W,onClick:function(t){e.push(t),o(t)},isSelected:s}),Object(D.jsxs)(l.d,{children:[Object(D.jsx)(l.b,{exact:!0,path:"/primary",children:Object(D.jsx)(H,{})}),Object(D.jsx)(l.b,{path:"/primary/search",children:Object(D.jsx)(G,{companies:w,contacts:v})})]})]})},J=(n(79),function(){var e=Object(l.g)().goBack,t=Object(l.i)().id,n=m(C),a=Object(c.useState)(),r=Object(b.a)(a,2),i=r[0],s=r[1],o=Object(c.useState)(),u=Object(b.a)(o,2),j=u[0],v=u[1],h=Object(c.useState)([]),O=Object(b.a)(h,2),x=O[0],y=O[1],w=Object(c.useState)([]),N=Object(b.a)(w,2),k=N[0],g=N[1];Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(n);case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:t=e.sent,y(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n&&e(),n&&t()}),[n]),Object(c.useEffect)((function(){var e=null===x||void 0===x?void 0:x.find((function(e){return e.id===t})),n=null===k||void 0===k?void 0:k.find((function(t){var n,a;return null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(a=n.Company)||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t.id)}));s(e),v(n)}),[x,k,t]);return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"details-header",children:Object(D.jsx)(p.PageReturnHeader,{onReturnClick:function(){e()},label:"Contact details"})}),Object(D.jsxs)("div",{className:"details-main-info",children:[z(null===i||void 0===i?void 0:i.fields),M(null===j||void 0===j?void 0:j.fields)]})]})}),Z=n(20),Y=n(45),$=["Champion","Decision Maker","Procurement","Influencer"],_=(n(80),function(e){var t,n,a={};return null!==(t=e.name)&&void 0!==t&&t.length||(a.name="The Contact Name is required."),/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(e.email)||(a.email="Please enter a valid email."),null!==(n=e.email)&&void 0!==n&&n.length||(a.email="The Email is required."),a}),K={name:"",email:"",phone:"",company:null,role:null},Q=function(e){var t=e.companies,n=Object(Y.b)(),a=n.values,r=n.setFieldValue,i=Object(c.useMemo)((function(){return(t||[]).map((function(e){return{key:e.id,label:e.fields.Company}}))}),[t]);return Object(D.jsx)("div",{className:"contact-company-wrapper",children:Object(D.jsx)(p.SearchableDropdown,{onSelectValue:function(e){r("company",e)},title:"Company",placeholder:"Select company",options:i,value:a.company})})},X=function(){var e=Object(Y.b)(),t=e.values,n=e.setFieldValue,a=Object(c.useMemo)((function(){return $.map((function(e){return{key:e,label:e}}))}),[]);return Object(D.jsx)("div",{className:"contact-role-wrapper",children:Object(D.jsx)(p.SearchableDropdown,{onSelectValue:function(e){n("role",e)},title:"Role",placeholder:"Select role",options:a,value:t.role})})},ee=function(){var e=Object(l.g)().goBack,t=m(C),n=Object(c.useState)([]),a=Object(b.a)(n,2),r=a[0],i=a[1];Object(c.useEffect)((function(){var e=function(){var e=Object(d.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:n=e.sent,i(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t&&e()}),[t]);var s=Object(c.useCallback)(function(){var n=Object(d.a)(f.a.mark((function n(a){var c,r,i,s,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[{fields:{"Full Name":a.name,Email:a.email,Phone:a.phone}}],null!==(c=a.company)&&void 0!==c&&c.key&&(i[0].fields.Company=[null===(s=a.company)||void 0===s?void 0:s.key]),null!==(r=a.role)&&void 0!==r&&r.key&&(i[0].fields.Role=[null===(o=a.role)||void 0===o?void 0:o.key]),n.next=5,E(t,i);case 5:u.b.success("Contact created!",{position:u.b.POSITION.TOP_RIGHT,autoClose:5e3}),e();case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e]);return Object(D.jsx)("div",{className:"contact-creation-wrapper",children:Object(D.jsx)(Y.a,{initialValues:K,validate:_,onSubmit:s,children:function(t){var n=t.values,a=t.handleSubmit,c=t.isValid,i=t.dirty,s=t.setFieldValue,o=t.setTouched,l=t.errors,u=t.touched;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"contact-creation-body",children:[Object(D.jsx)(p.PageReturnHeader,{label:"Create new",onReturnClick:e,className:"contact-creation-prh"}),Object(D.jsx)("h2",{className:"contact-creation-title",children:"Create new contact"}),Object(D.jsx)("div",{className:"contact-field-wrapper",children:Object(D.jsx)(p.TextField,{isRequired:!0,label:"Name",value:n.name,placeholder:"Contact name",onChange:function(e){return s("name",e)},onBlur:function(){return o(Object(Z.a)(Object(Z.a)({},u),{},{name:!0}),!0)},errorText:l.name&&u.name?l.name:""})}),Object(D.jsx)("div",{className:"contact-field-wrapper",children:Object(D.jsx)(p.TextField,{isRequired:!0,label:"Email",value:n.email,placeholder:"Contact email",onChange:function(e){return s("email",e)},onBlur:function(){return o(Object(Z.a)(Object(Z.a)({},u),{},{email:!0}),!0)},errorText:l.email&&u.email?l.email:""})}),Object(D.jsx)("div",{className:"contact-field-wrapper",children:Object(D.jsx)(p.TextField,{label:"Phone",value:n.phone,placeholder:"Contact phone",onChange:function(e){return s("phone",e)}})}),Object(D.jsx)(Q,{companies:r}),Object(D.jsx)(X,{})]}),Object(D.jsx)(p.Footer,{isPrimaryDisabled:!c||!i,primaryLabel:"Create",onPrimaryClick:a,secondaryLabel:"Cancel",onSecondaryClick:e})]})}})})},te=(n(81),function(){var e=Object(l.g)(),t=h(),n=Object(c.useState)(""),a=Object(b.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(""),o=Object(b.a)(s,2),u=o[0],j=o[1],v=Object(c.useState)(!1),O=Object(b.a)(v,2),x=O[0],y=O[1],w=m(C),k=m(B);Object(c.useEffect)((function(){k&&e.push("/primary")}),[k]);var g=function(){var e=Object(d.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),e.t0=r,!e.t0){e.next=6;break}return e.next=5,F(w,r);case 5:e.t0=e.sent;case 6:e.t0?(t(I(!0)),n=r,window.localStorage.setItem(N,n),y(!1)):(y(!1),j("The base id isn't correct"));case 8:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{className:"sign-in-wrapper",children:Object(D.jsxs)("div",{className:"sign-in-content",children:[Object(D.jsx)(p.TextField,{label:"Airtable Base Id",placeholder:"Base Id",onChange:function(e){i(e),u.length&&j("")},value:r,isRequired:!0,errorText:u}),Object(D.jsx)("p",{className:"sign-in-description ",children:"Place enter your Airtable Base Id to continue work with the app."}),Object(D.jsx)(p.Button,{label:"Sign in",className:"sign-in-button",onClick:g,isDisabled:x})]})})}),ne=n(60),ae=["children"],ce=function(e){var t=e.children,n=Object(ne.a)(e,ae),a=m(B);return Object(D.jsx)(l.b,Object(Z.a)(Object(Z.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(D.jsx)(l.a,{to:{pathname:"/",state:{from:n}}})}}))},re=n(61);n(101);var ie=function(){var e=h(),t=m(C),n=m(B);return Object(c.useEffect)((function(){t&&e(P(t))}),[t,e]),Object(c.useEffect)((function(){var t=re.default.contextUpdates.subscribe((function(t){return e(y(t))}));return function(){return t.unsubscribe()}}),[e]),null!==n?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(o.a,{basename:"/front-plugin-demo",children:Object(D.jsxs)(l.d,{children:[Object(D.jsx)(ce,{path:"/create",children:Object(D.jsx)(ee,{})}),Object(D.jsx)(ce,{path:"/items/:id",children:Object(D.jsx)(J,{})}),Object(D.jsx)(ce,{path:"/primary",children:Object(D.jsx)(U,{})}),Object(D.jsx)(l.b,{exact:!0,path:"/",children:n?Object(D.jsx)(l.a,{to:"/primary"}):Object(D.jsx)(te,{})})]})}),Object(D.jsx)(u.a,{})]}):null},se=(Object(O.b)("contacts/createContact",function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,n.dispatch,e.prev=1,e.abrupt("return",Promise.resolve([]));case 5:return e.prev=5,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(O.c)({name:"contacts",initialState:{entities:[],contactsIds:{},contactsByWorkspaceId:{}},reducers:{},extraReducers:function(e){}}).reducer),oe=Object(O.a)({reducer:{contacts:se,front:w,users:A}});n(102);s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(v.a,{store:oe,children:Object(D.jsx)(ie,{})})}),document.getElementById("root"))},71:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.3add743c.chunk.js.map